<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin GiriÅŸi | Ber Canâ€™t Fitness</title>
  <link rel="stylesheet" href="style.css">

  <!-- Firebase -->
  <script src="app.js"></script>
  
</head>

<body>

<div class="container">

  <!-- LOGIN -->
  <div id="loginBox" class="card">
    <div class="hero">
      <h1>ğŸ” Admin GiriÅŸi</h1>
      <p>Yetkili eriÅŸim</p>
    </div>

    <input type="password" id="adminPass" placeholder="Admin Åifresi">
    <button onclick="login()">GiriÅŸ Yap</button>
  </div>

  <!-- PANEL -->
  <div id="panelBox" style="display:none;">

    <div class="hero">
      <h1>ğŸ‘‘ Admin Panel</h1>
      <p>TÃ¼m sporcu kayÄ±tlarÄ±</p>
    </div>

    <div class="card">
      <button onclick="loadAllData()">TÃ¼m KayÄ±tlarÄ± Getir</button>
      <button onclick="logout()">Ã‡Ä±kÄ±ÅŸ Yap</button>
    </div>

    <div id="allRecords"></div>

  </div>

</div>

<script src="app.js"></script>

<script>
const ADMIN_PASSWORD = "3333"; // ğŸ”¥ BURAYI DEÄÄ°ÅTÄ°R

// Sayfa aÃ§Ä±lÄ±nca kontrol
if (localStorage.getItem("adminAuth") === "true") {
  showPanel();
}

function login() {
  const pass = document.getElementById("adminPass").value;

  if (pass === ADMIN_PASSWORD) {
    localStorage.setItem("adminAuth", "true");
    showPanel();
  } else {
    alert("HatalÄ± ÅŸifre");
  }
}

function logout() {
  localStorage.removeItem("adminAuth");
  location.reload();
}

function showPanel() {
  document.getElementById("loginBox").style.display = "none";
  document.getElementById("panelBox").style.display = "block";
}

function loadAllData() {
  const container = document.getElementById("allRecords");
  container.innerHTML = "";

  db.collection("records")
  .get()

    .then(snapshot => {
      snapshot.forEach(doc => {
        const d = doc.data();

        container.innerHTML += `
          <div class="record">
            <strong>ğŸ‘¤ ${d.name}</strong><br>
            ğŸ“… ${d.date} ${d.time}<br>
            ğŸ’§ Su: ${d.water} L<br>
            ğŸ’Š Takviye: ${d.supp}<br>
            ğŸ½ Yemek: ${d.food}<br><br>
            <button onclick="deleteRecord('${doc.id}')">Sil</button>
          </div>
        `;
      });
    });
}

function deleteRecord(id) {
  if (confirm("Bu kayÄ±t silinsin mi?")) {
    db.collection("records").doc(id).delete().then(() => {
      loadAllData();
    });
  }
}
</script>

</body>
</html>
